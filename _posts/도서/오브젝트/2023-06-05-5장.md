---
title: 오브젝트 - 5장 책임 할당하기
date: 2023-06-05
categories: [도서, 오브젝트]
tags: [OOP, 오브젝트]
math: true
mermaid: true
---

## 5장 주요 포인트
객체지향을 설계할때 책임중심으로 설계하는 것이 가장 중요하다는 것을 알았는데, 그럼 어떻게 해야 책임 중심 설계를 잘할 수 있을까?
알맞은 객체에 적당한 책임을 부여하는 것은 생각보다 어려운 일이다. 

- GRASP 패턴을 통해 책임을 할당하는 방법
- 구현 및 Refactoring을 통해 책임을 잘 할당하는 방법


## 책임 할당을 위한 GRASP 패턴

> GRASP 패턴은 General Responsibility Assignment Software Pattern의 약자이며, 크레이그 라만이 패턴형식으로 고안한 방법 

<br>

### 도메인 개념을 정리하라
도메인 개념을 어느정도 확립해 두어야 나중에 이를 기반으로 구현을 할때 편할 수 있다. <br>
다만 처음부터 도메인 개념을 완벽하게 세우기에는 무리가 있으므로 어느 정도 세웠다면 넘어가는 것이 좋다.

![image](https://github.com/woowa-backend/object/assets/39672033/04655a78-bb16-4d5b-a4a3-4d158321b41a)

<br>

### Information Expert 패턴을 적용하라
객체를 자율적으로 만들기 위해서는 정보를 가장 잘 아는 객체에게 책임을 할당해야 한다. <br>

> 단 객체가 정보를 잘 안다는 것은 데이터(상태값)만 말하는 것이 아니라, 다른 객체가 알아도 협력을 통해서 필요한 정보를 제공할 수도 있다. <br>

적용방법 
1. 애플리케이션이 제공해야 하는 궁극적인 기능을 하나 정한다.(예매하라, 정산하라 등)
2. 도메인 개념에서 나열한 도메인 중 이를 가장 잘 해결할 수 있는 도메인에게 전달한다.
3. 만약 해당 도메인이 혼자서 해결할 수 없는 기능이라면 다른 도메인 객체와 협력을 통해 문제를 해결할 수 있는지 고민한다.
4. 다른 도메인 객체와 협력을 한다는 말은 결국 메시지를 전송하여 책임을 부여하는 일임으로 이런 방식으로 책임 설계를 진행할 수 있다.

<br>

### Low Coupling(낮은 결합도) 패턴과 High Cohesion(높은 응집도) 패턴을 사용하자

Information Expert패턴을 사용하면서 객체에 책임을 할당하다 보면 다양한 고민거리가 생길 수 있다. <br>
그 중 하나가 설계는 정답이 없기 때문에 어느 한 도메인(A)에서 다른 도메인(C)으로 메시지를 전송하는 것도 괜찮지만, 다른 도메인(B)에서 C도메인으로 메시지를 요청하게 만들 수 있다. <br>
이런 트레이드오프를 고려할 경우엔 **낮은 결합도**, **높은 응집도**를 어떤 설계가 가장 잘 만족하는지를 고민해보면 해답이 나온다. <br>

![image](https://github.com/woowa-backend/object/assets/39672033/fcf180b0-02d0-44ee-8de1-de1dbf886386)

<br>

### Createor 패턴을 적용해라

도메인 객체들 간의 협력은 어찌저찌해서 연결이 되었는데 그럼 이 객체들은 누가? 언제? 생성해야 할까? <br>
이런 고민이들때에 한번 생각해 보면 좋은 패턴이다. <br>

> Creator 패턴은 객체와 연결되거나 관련될 필요가 있는 객체에게 해당 객체를 생성할 책임을 맡기는 것

객체들 간의 관련이 있다는 말은 이미 참조되어 있거나, 긴밀하게 사용하고 있다는 말이다. <br>
즉 이미 두 객체들 간의 결합이 있는 것 임으로 낮은 결합도를 유지하는데 도움이 될 수 있다.

<br>

## GRASP 패턴을 이용하여 구현

위 학습한 내용을 토대로 책임 중심의 설계가 완료되었다면 마지막으로 구현을 통해서 설계에 문제가 없는지 확인하면 된다. <br>
구현을 하다보면 몇몇 인스턴스 변수가 상황에 따라 초기화 되는 시점이 다르다던지(응집도가 낮음), 결합도가 높은 부분이 있다면 Refactoring을 통해서 개선해야 한다. <br>

<br>

### Refactoring을 할때 주의사항

1. 동일한 기능을 수행해야 하며, 앞서 말한 캡슐화, 결합도, 응집도를 생각하면서 수정을 해야한다.
2. 다형성을 이용할 때에는 상속, 인터페이스를 이용할 수 있다.
   - 상속 선택 : **구현을 공유**해야 할 필요가 있다면 상속을 사용한다.
   - 인터페이스 선택 : 구현을 공유할 필요가 없고, 단지 객체들간의 **책임만 정의**하고 싶다면 인터페이스를 사용한다.

<br>

### 그래도 못하겠으면?!

책임중심적으로 설계하고 개발하는 것은 생각보다 쉬운 일이 아니다. <br>
일을 하다보면 본인이 잘 아는 도메인이 아니라 생소한 도메인을 개발하는 일이 발생하는데, 이때 책임중심적으로 설계하려고 하면 어려움이 따른다. <br>
따라서 빠른 판단을 통해서 책임 중심 설계를 하기 힘든 상황이라면 일단 **데이터 중심 설계**를 통해서 기능 개발을 완료한 뒤 **Refactoring을 사용하여 책임 중심 설계로 개선**하는 것이 좋다. <br>

