---
title: 오브젝트 - 12장 다형성 
date: 2023-06-27
categories: [도서, 오브젝트]
tags: [OOP, 오브젝트]
math: true
mermaid: true
---

## 12장 핵심 포인트


## 다형성
상속은 재사용을 목적으로 사용하면 안되는 것을 앞서 배웠다. <br>
대신 상속을 사용하는 목적이 타입 계층을 구조화 하여 다형성을 사용하는 것은 좋은 방법이다. <br>

> 다형성 : 런타임에 객체가 주입되어 동작하는 방식을 결정하는 것

다형성이란 그리스어에서 '많은'을 의미하는 poly와 형태를 의미하는 morph의 합성어로 '많은 형태를 가질 수 있는 능력'을 의미한다. <br>
다형성도 여러가지가 있지만 앞으로 알아볼 다형성은 포함 다형성으로 메시지가 동일해도 수신한 객체의 타입에 따라 실제로 수행되는 행동이 달라지는 것을 말한다. <br>

<br>

## 상속을 이용한 다형성
어떻게 보면 상속을 **데이터 관점의 상속**과 **행동 관점의 상속**으로 나누어 생각해 볼 수 있다. <br>

> 데이터 관점의 상속 : 부모 클래스에서 선언한 인스턴스를 자식 클래스에서 사용할 수 있다.

> 행동 관점의 상속 : 부모 클래스에 선언한 메서드를 자식 클래스에서 사용할 수 있다. 

하지만 이렇게 나눠서 생각하여 자칫 잘못하면 상속을 사용하는 이유는 재사용 때문이라고 생각할 수 있다. <br>
다형성이란 개념을 이해하기 위해서는 사전에 메서드 오버라이딩, 메서드 오버로딩 개념을 알고 있어야 한다. <br>

> 메서드 오버라이딩 : 부모 클래스에서 정의한 메서드 시그니처를 자식클래스에서 동일한 시그니처로 재정의 하는 것

> 메서드 오버로딩 : 부모 클래스에서 정의한 메서드 이름은 동일하지만 자식클래스에서 메서드 시그니처가 다른 메서드를 정의하는 것

<br>

### 객체지향 프로그래밍에서는 어떻게 다형성을 지원할까? 
**업캐스팅**과 **동적 바인딩**을 통해 다형성을 지원한다. <br>

> 업캐스팅 : 부모 타입으로 선언된 변수에 자식 타입의 인스턴스를 할당하는 것 

> 동적 바인딩 : 런타임에 메시지를 수신한 객체의 타입을 확인하여 그에 맞는 메서드를 실행하는 것

따라서 업캐스팅과 동적 바인딩을 통해 SOLID원칙 중 하나인 **개방폐쇄 원칙**을 지킬 수 있게 되면서 유연한 설계가 가능하게 된다. <br>

<br>

### 동적 메서드 탐색과 다형성
그렇다면 컴파일러는 어떻게 동적 바인딩을 구현할까? <br>
![image](https://github.com/woowa-backend/object/assets/39672033/22b71b39-b11d-421b-b1fa-ae3d325c90ce)

**[동작순서]**
1. Jack이란 인스턴스 변수가 메시지를 수신한다.(메서드 호출)
2. self라는 임시 참조변수 생성
3. 메시지를 수신한 객체 주소를 self에 저장(men 주소)
4. self에 저장된 객체의 클래스에서 메서드 탐색(Men 클래스의 메서드 탐색)
5. 없으면 클래스(Men)가 가지고 있는 parent 포인터변수를 사용하여 부모 클래스 접근하여 메서드 탐색 (People 클래스의 메서드 탐색)
6. 없으면 클래스(People)가 가지고 있는 parent 포인터변수를 사용하여 부모 클래스 접근하여 메서드 탐색 (Object 클래스의 메서드 탐색)
7. 탐색이 완료되면 임시 self 참조변수 제거

따라서 위 순서대로 **상속 계층에 따라 메서드 탐색을 위임**하며, self 참조변수를 이용하여 런타임 시점에 **동적으로 문맥이 결정**된다. <br>



