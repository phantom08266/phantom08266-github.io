---
title: 오브젝트 - 8장 의존성 관리하기
date: 2023-06-13
categories: [도서, 오브젝트]
tags: [OOP, 오브젝트]
math: true
mermaid: true
---


## 8장 핵심 포인트
객체지향에서 중요한 협력을 어떻게 하면 적절한 의존성을 갖게 할 수 있는지 원칙과 기법들을 알아본다.

<br>

## 의존성의 종류 및 특징

### 런타임 의존성과 컴파일타임 의존성
> 런타임 의존성 : 실행 시점의 의존성

> 컴파일 타임 의존성 : 컴파일 시점의 의존성 or 코드 그 자체를 의미하기도 함.(파이썬 같은 인터프리터 언어들은 컴파일러가 존재하지 않기 때문)

결론적으로 컴파일 타임 의존성은 낮춰야 하고, 런타임 의존성을 높여야 한다. <br>
그래야 유연한 설계를 할 수 있다.

### 의존성 전이
의존성 종류로 크게 **직접 의존성**, **간접 의존성** 2가지가 있다. <br>
직접 의존성은 코드 상에 메서드 파라미터이던 new연산자를 사용하든 간에 직접적으로 의존하는 것을 의미한다. <br>
간접 의존성은 의존성 전이를 의미하며, A가 B를 의존하는데 B에서 C를 의존하고 있었다면 결과적으로 A -> B -> C 간의 의존성이 전파되는 것을 말한다. <br>

### 적절한 의존성을 할당하는 방법

1. **생성자 주입**을 사용하자.
2. 객체 생성 후 **Setter메서드**를 사용하자.
3. **메서드 실행 시 인자**를 이용해서 의존성을 주입하자.

생성자 주입은 현재 스프링에서도 사용하고 권장하는 방법. <br>
Setter메서드는 단점이 Setter메서드로 초기화하지 않는 상태에서 호출되어 원치않는 결과를 초래할 수 있다. <br>
이에 대안으로 객체 초기화 시 자주 사용될 만한 객체로 초기화 한다음 원할때 Setter메서드를 통해 런타임 시 객체를 변경할 수도 있다. <br>

<br>

## 의존성 관리 원칙

### 지식의 양이 결합도를 높인다
협력을 할때에는 서로간의 정보를 적게 아는 것이 좋다. <br>
따라서 결합도를 낮추기 위해서, 지식의 양을 줄이기 위해서는 추상화를 사용해야 한다. <br>

### 추상화에 의존해라
결합도 즉 **느슨한 결합**(loose coupling)을 하기 위해서는 구체클래스 의존성 -> 추상클래스 의존성 -> 인터페이스 의존성 순으로 적용 시 낮아진다. <br> 
즉 추상 클래스보다 인터페이스를 사용하는 것이 결합도가 더 낮아진다는 말이다.

### 명시적인 의존성을 지양해라
객체 내부에서 인스턴스를 직접 생성하는 방식은 지양해야 한다. <br>
나중에 이를 수정하려면 복잡한 객체 내부를 수정해야 하기 때문이다. <br>

> 내부에서 생성하지 말고 외부에서 주입받아 사용하자. 즉 인스턴스를 생성하는 로직과 사용하는 로직을 분리해서 책임에 맞게 개발하자.

따라서 객체 내부에서 new 연산자를 사용하는 것은 지양해야 한다. <br>

> 단! List같은 JDK에서 지원하는 기본 컬렉션 등 타입들은 new를 사용해서 생성하더라도 변경될 확률이 극히 적기 때문에 사용해도 좋다.



