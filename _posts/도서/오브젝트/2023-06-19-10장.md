---
title: 오브젝트 - 10장 상속과 코드 재사용
date: 2023-06-18
categories: [도서, 오브젝트]
tags: [OOP, 오브젝트]
math: true
mermaid: true
---

## 10장 핵심 포인트
객체지향 프로그래밍의 장점인 **코드 재사용**에 대해 알아본다. <br>
상속, 합성 중 일단 상속에 대해서 알아보고 상속의 문제점에 대해서 알아본다. <br>

<br>

## 상속

클린코드에서도 나오지만 **DRY(Don't Repeat Yourself)원칙** 이라는 것이 있다. <br>
즉 중복된 코드를 만들지 말라는 말이다. <br>

책에서는 이해를 돕기위해 중복된 상황이 발생한 경우 동일한 코드를 복사하여 새로운 클래스를 만들어서 해결하는 모습을 보여준다. <br>
이렇게 하게되면 동일한 로직을 가지는 코드가 중복되어 추후 수정 시 한쪽만 수정하는 등의 버그 및 문제점들이 발생할 수 있다. <br>

이러한 문제점을 해결하기 위해 **상속**을 사용할 수 있다. <br>

하지만 상속은 자식이 부모의 내용을 잘 알고 있어야 하는 문제가 있다는 것을 앞서 학습하여 우린 알고 있다. <br>
따라서 상속은 **부모 클래스의 내부 구현을 자식 클래스가 알고 있어야 한다는 문제** 즉 결합도가 높다는 단점이 있다. <br>

> 또 다른 문제는 중복을 없애기 위해 상속을 사용했는데 부모와 자식간의 또다른 중복이 생길 수 있다.

이는 자식이 부모클래스에 너무 강하게 결합되어있기 때문이다. 이러한 문제는 자식 클래스에서 **super 호출**을 하지 않는다면 해소될 수 있다. <br>
또한 이렇게 자식클래스가 부모클래스의 변경에 취약해지는 현상을 **취약한 기반 클래스 문제**라고 한다.

<br>

## 상속의 문제점

객체지향에서 상속의 근본적인 문제는 결합도를 향상시키며 캡슐화를 저하시킨다는 것이다.

### 불필요한 인터페이스 상속문제
자바에서 java.util.Properties, java.util.Stack이 대표적인 케이스이다. <br>
Properties는 Hashtable을 상속받는데 자바에 Generic이 도입되기 전에 만들어져서 타입을 체크하기 어려웠다. <br>
따라서 Properties 도메인 특성상 String타입만 받아야 하는데 부모의 Hashtable의 인터페이스를 상속받아 사용할 수 있게 되면서 일부 메서드를 사용할 수 있게 되었다. <br>

~~~ java
Properties props = new Properties();
props.setProperty("test", "1");
props.put("test2", 1); // 컴파일 에러가 발생하지 않는다.

props.getProperty("test2"); // Properties는 반환 타입이 String이 아니면 null을 반환한다. 
~~~

Stack은 Vector를 상속받는데 Vector의 메서드 중 add()와 remove() 같은 불필요한 기능을 제공하게 된다. <br>


### 메서드 오버라이딩 오작용 문제
자바에서는 메서드 오버라이딩을 통해 부모의 메서드를 재정의 할 수 있다. <br>
이때 오버라이딩 한 메서드 안에서 부모의 메서드를 호출한다면 혹시 모를 문제가 발생할 수 있다. <br>
따라서 부모가 어떻게 작성되어있는지 확인해야 한다.

### 부모 클래스와 자식 클래스의 동시 수정 문제
상속을 사용하면 가끔 부모 클래스를 수정하면 자식 클래스도 같이 수정해야 될 때가 있다. <br>
이 부분도 결합도가 높아서 발생하는 문제이다. <br>
예를들어 부모에 인스턴스 변수를 추가하면 자식클래스에서 생성자 매개변수로 추가되거나 매서드가 추가되는 등 자식클래스도 같이 수정되어야 한다. 

<br>

## 상속을 사용할때 원칙

1. 유사한 메서드들이 있다면 차이점을 메서드로 분리하고 유사한 메서드들을 동일하게 만들어서 동일한 메서드는 부모 클래스로, 차이점은 자식 클래스의 구현으로 만들자.
2. 부모 클래스의 코드를 하위로 내리지 말고 자식 코드를 부모클래스로 올리자.
