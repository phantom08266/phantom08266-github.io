---
title: RealMySql 8.0 - mysql 소개 및 설치 방법
date: 2023-08-01
categories: [도서, RealMySql]
tags: [mysql, RealMySql, SQL]
math: true
mermaid: true
---

## Mysql을 사용해야 하는 이유
안정성, 성능과 기능, 커뮤니티 활성화 순으로 많은 사람들이 DB를 선택하게 되는데, 이때 무료이면서 3가지 조건을 만족하는 DB가 바로 Mysql이다. <br>

Mysql5.5 버전 이전 오라클에 인수되기 전에는 엔터프라이즈와 커뮤니티 버전이 패치횟수 차이였지만, 인수된 이후부터는 5.5 ~ 5.7 안정성과 성능개선이 되었다. <br>
또한 8.0부터는 상용화된 DBMS의 기능들이 장착되기 시작하면서 기능적인 부분에서도 많은 발전을 이루었다. <br>

## Mysql 개념

### mysql 설치 위치
mysql은 기본적으로 /usr/local/mysql에 설치된다. <br>

### my.cnf 파일
보통 mysql 폴더 하위에 my.cnf 파일이 존재한다. <br>

~~~shell
$ vim /usr/local/mysql/my.cnf
~~~

### 설치 후 핵심 폴더

- bin : mysql 실행파일 목록들을 가지고 있는 폴더
- data : 로그 및 데이터 파일들을 가지고 있는 폴더
- include : C/C++ 헤더 파일들이 저장된 폴더
- lib : 라이브러리 파일들이 저장된 폴더
- share : my.cnf 샘플파일 및 각종 여러 샘플 파일들이 저장된 폴더


### 클린 셧다운
Mysql 서버가 종료 되기 전 모든 커밋된 내용을 데이터 파일에 기록하고 종료하는 것을 말한다. <br>
요청이 많은 서버는 트랜잭션이 커밋돼도 데이터 파일에 저장하지 않고 로그파일(리두 로그)에만 적재하여 나중에 서버가 완전 재시작 될때 로그파일에 있는 정보를 기준으로 
트랜잭션 복구 과정을 진행한다. 하지만 이렇게 되면 서버가 재시작 될때 로딩을 해야하는 사전작업으로 인해 실행 시간이 길어지게 된다. <br>

따라서 클린 셧다운을 설정하면 재시작시 빠른 부팅을 할 수 있다. <br>

~~~ vim
mysql> SET GLOBAL innodb_fast_shutdown=0;

# 설정이 잘 되었는지 확인
mysql> SHOW VARIABLES LIKE 'innodb_fast_shutdown'; 
~~~





## 서버 실행 시 트러블 슈팅

### ERROR! MySQL is running but PID file could not be found 에러
mysql community server를 설치하면 MacBook의 시스템 설정화면에 MYSQL 설정값을 확인 및 서버를 Start, Stop할 수 있다. <br>
![image](https://github.com/woowa-backend/object/assets/39672033/a197fc10-14d5-4838-92fe-9ead087f8741)

또한 Commend를 통해서 Server를 ON, OFF 할 수 있다. <br>

~~~shell
$ sudo /usr/local/mysql/support-files/mysql.server start
$ sudo /usr/local/mysql/support-files/mysql.server stop
~~~

따라서 시스템 설정에서 Server를 Start 시키고 Commend 명령어를 통해 서버를 종료시키려고 하니 다음과 같은 에러가 발생하였다. <br>

![image](https://github.com/woowa-backend/object/assets/39672033/75cb942b-acec-43f7-be36-5cabfb00e8d9)

서버를 실행한 것을 단순히 commend로 종료를 하려고 했을 뿐인데 왜 PID를 찾을 수 없을까? 🤔
이를 알아보기 위해 실행경로를 확인해 보았다. <br>

아래 명령어를 통해서 실행중인 mysql server의 PID 및 설정 정보들을 확인할 수 있었다. <br>
~~~shell
$ ps aux | grep mysqld
~~~

#### 시스템 설정으로 실행했을 경우 
![image](https://github.com/woowa-backend/object/assets/39672033/1a79b627-a21c-4f78-bc91-36b0cc4e5b0c)

#### commend로 실행했을 경우
![image](https://github.com/woowa-backend/object/assets/39672033/5285996e-c433-4ac2-810e-577f3898578a)

이는 시스템 설정과 mysql.server pid-file 옵션이 서로 다르기 때문에 commend로 실행 및 종료를 할때에는 파일 명이 다르기 때문에 PID를 찾을 수 없다는 에러가 발생한 것이라 추측했습니다. <br>
따라서 이를 동일하게 맞추니 시스템 설정에서 실행한 것을 commend로 종료할 수 있었습니다. <br>

~~~vim
# my.cnf 설정파일

[mysqld]
pid-file = /usr/local/mysql/data/mysqld.local.pid
~~~

음.. 하지만 이렇게 해도 딱 한가지 commend로 실행하고 시스템 설정으로 종료하는것은 되지 않았는데 이는 조금 더 찾아보고 정리해야할 것 같습니다. 😭


